var pop={isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isChrome:/chrome/i.test(navigator.userAgent),isFF:/firefox/i.test(navigator.userAgent),addEvent:function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},removeEvent:function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n):null!=t.detachEvent?t.detachEvent("on"+e,n):t[e]=null},addPopupAnimationEndEvent:function(t,e){var n=function(t,e){return function(){e(t)}}(t,e);this.addEvent(t,"animationend",n),this.addEvent(t,"oanimationend",n),this.addEvent(t,"webkitAnimationEnd",n),this.addEvent(t,"MSAnimationEnd",n),t.fn=n},removePopupAnimationEndEvent:function(t){this.removeEvent(t,"animationend",t.fn),this.removeEvent(t,"oanimationend",t.fn),this.removeEvent(t,"webkitAnimationEnd",t.fn),this.removeEvent(t,"MSAnimationEnd",t.fn),t.fn=null},prop:function(t,e,n){var o=void 0;"Transform"===e&&(o=t.getAttribute("data-popup-transform"))&&(n.length&&(n+=" "),n+=o);for(var i="Webkit Moz O ms Khtml".split(" "),s=0;s<i.length;s++)if(void 0!==t.style[i[s]+e])return void(t.style[i[s]+e]=n);void 0===t.style[e.toLowerCase()]||(t.style[e.toLowerCase()]=n)},animationSupport:function(){if(null!=this.animations)return this.animations;var t=document.createElement("div");if(void 0!==t.style.animationName)return this.animations=!0;for(var e="Webkit Moz O ms Khtml".split(" "),n=0;n<e.length;n++)if(void 0!==t.style[e[n]+"AnimationName"])return this.animations=!0;return this.animations=!1},popupFadeIn:function(t){t.style.opacity=1,this.removeClass(t,"fadeIn"),t.offsetWidth,this.removePopupAnimationEndEvent(t)},popupFadeOut:function(t){t.style.visibility="hidden",this.prop(t,"Transform","translate3d(-999999px,0,0)"),t.style.opacity=0,this.removeClass(t,"fadeOut"),t.offsetWidth,this.removePopupAnimationEndEvent(t)},closeGroup:function(t){if(0==t.hasAttribute("data-popup-group"))return!0;for(var e=t.getAttribute("data-popup-group"),n=document.getElementsByClassName("popup"),o=n.length-1;o>=0;o--)for(var i=n[o];i!=t&&i!=document;){if(i.getAttribute("data-popup-group")===e){if(!1!==this.isOpen(i))this.closePopup(i.id);else if(i.hasAttribute("data-popup-open"))return!1;break}i=i.parentNode}return!0},show:function(t){var e=document.getElementById(t);this.prop(e,"Transform","")},openPopup:function(t,e){void 0!==e&&e.stopImmediatePropagation();var n=document.getElementById(t);if(null===n||!this.closeGroup(n))return!1;var o=this.canOpen(n);if(!1===o)return!1;if(null!=o)wl.doAnimate(o);else{if(!this.hasClass(n,"animm")){var i=n.querySelector(".animm");null!=i&&(i.style.visibility="visible")}n.style.visibility="visible",n.style.opacity=1}var s=n.querySelector(".popup"),a=(null!=s?s:n).children[0];void 0!==a&&"scroll"===getComputedStyle(a).getPropertyValue("overflow")&&(a.style.overflow="hidden",a.offsetWidth,a.style.overflow=""),n.setAttribute("data-popup-open",!0);var r=n.getAttribute("data-popup-type");if(r>0){if(null!=o){var u=n.getAttribute("data-anim");u=u.split(";"),n.style.animationDuration=n.style["-webkit-animation-duration"]=n.style["-moz-animation-duration"]=u[0],n.style.animationDelay=n.style["-webkit-animation-delay"]=n.style["-moz-animation-delay"]=u[1],this.removeClass(n,"fadeOut"),this.addClass(n,"fadeIn"),n.style.visibility="visible",this.addPopupAnimationEndEvent(n,this.popupFadeIn.bind(this))}if(1==r){var p=document.body,l=document.documentElement.clientWidth-window.innerWidth,d=getComputedStyle(p).getPropertyValue("min-width");"0px"!==d&&(d=parseInt(d)*this.z())>document.documentElement.clientWidth&&(l+=parseInt(d)-document.documentElement.clientWidth)>0&&(l=0),p.style.setProperty("--sw",parseInt(l)+"px"),n.escapePressed=function(t){return function(e){var n;pop.isOpen(t)&&(n=t.getAttribute("onclick"))&&n.length>0&&27==e.keyCode&&t.escapePressed&&(pop.closePopup(t.id),pop.removeEvent(document,"keyup",t.escapePressed),t.escapePressed=void 0)}}(n),this.addEvent(document,"keyup",n.escapePressed),this.updateAlign(),this.addClass(p,"modpop"),n.addEventListener&&n.addEventListener("touchstart",this.preventscroll=function(t){return function(e){if(e.target==t){var n=t.getAttribute("onclick");n&&n.length>0&&pop.closePopup(t.id)}}}(n))}}if(this.prop(n,"Transform",""),null!=this.hook&&null!=this.hook[t])for(var h=this.hook[t],m=h.length,c=0;c<m;c++)null!=h[c].open&&h[c].open();var v=document.createEvent("Event");return v.initEvent("scroll",!0,!0),window.dispatchEvent(v),!1},isOpen:function(t){var e;return!(!t.hasAttribute("data-popup-open")||t.fn||this.hasClass(t,"animated")||null!=(e=t.querySelector(".animm"))&&this.hasClass(e,"animated"))&&e},canOpen:function(t){var e=void 0;return this.animationSupport()&&(e=this.hasClass(t,"animm")?t:t.querySelector(".animm")),!(t.hasAttribute("data-popup-open")||null!=t.fn||this.hasClass(t,"animated")||null!=e&&this.hasClass(e,"animated"))&&e},openClosePopup:function(t,e){var n=document.getElementById(t);return!1===this.isOpen(n)?this.openPopup(t,e):this.closePopup(t,e),!1},closePopup:function(t,e){void 0!==e&&e.stopImmediatePropagation();var n=document.getElementById(t),o=this.isOpen(n);if(!1===o)return!1;var i=n.getAttribute("data-popup-type");n.removeAttribute("data-popup-open"),this.animationSupport()&&(o=this.hasClass(n,"animm")?n:n.querySelector(".animm")),null!=o&&wl.doAnimate(o,1),n!=o&&(null!=o&&0!=i?(this.removeClass(n,"fadeIn"),this.addClass(n,"fadeOut"),this.addPopupAnimationEndEvent(n,this.popupFadeOut.bind(this))):(n.style.visibility="hidden",this.prop(n,"Transform","translate3d(-999999px,0,0)"),n.style.opacity=0));var s=document.body;if(1==i&&(this.removeClass(s,"modpop"),this.updateAlign(!0)),s.style.setProperty("--sw","0px"),n.removeEventListener&&n.removeEventListener("touchstart",this.preventScroll),null!=this.hook&&null!=this.hook[t])for(var a=this.hook[t],r=a.length,u=0;u<r;u++)null!=a[u].close&&a[u].close();return!1},overPopup:function(t,e){var n=document.getElementById(e);!1===this.isOpen(n)?this.openPopup(e):t.oo&&(clearTimeout(t.oo),t.oo=void 0)},overoutPopup:function(t,e){var n=function(t,e){return function(){var o,i=null!=e?document.getElementById(e):void 0;!t.oo||null!=i&&!1!==pop.isOpen(i)&&pop.isOver((o=i.querySelector(".popup"))?o:i)?t.oo=setTimeout(n,t.oo?100:1):(t.oo=void 0,null!=e&&(!1!==pop.isOpen(i)?pop.closePopup(e):i.hasAttribute("data-popup-open")&&(t.oo=setTimeout(n,100))))}}(t,e);t.oo&&(clearTimeout(t.oo),t.oo=void 0),n()},mouseMove:function(t){this.mouseX=t.clientX,this.mouseY=t.clientY},touchStart:function(t,e,n){t.touches.length&&(this.mouseX=t.touches[0].clientX,this.mouseY=t.touches[0].clientY),this.overPopup(e,n)},touchMove:function(t){t.touches.length&&(this.mouseX=t.touches[0].clientX,this.mouseY=t.touches[0].clientY)},touchEnd:function(t,e,n){t.touches.length&&(this.mouseX=t.touches[0].clientX,this.mouseY=t.touches[0].clientY)},isOver:function(t){var e=t.getBoundingClientRect();if(!this.isFF){var n=this.z();e={left:e.left*n,right:e.right*n,top:e.top*n,bottom:e.bottom*n},this.isChrome||(e.top+=window.scrollY*(n-1),e.bottom+=window.scrollY*(n-1))}return this.mouseX>=parseInt(e.left)&&this.mouseX<=parseInt(e.right)&&this.mouseY>=parseInt(e.top)&&this.mouseY<=parseInt(e.bottom)},hasClass:function(t,e){var n=t.classList;return null!=n?n.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1},addClass:function(t,e){var n=t.classList;null!=n?n.add(e):t.className+=" "+e},removeClass:function(t,e){if(null!=(n=t.classList))n.remove(e);else{var n,o=(n=t.className.split(" ")).indexOf(e);o>=0&&(n.splice(o,1),t.className=n.join(" "))}},addHook:function(t,e,n){null==this.hook&&(this.hook={}),null==this.hook[t]&&(this.hook[t]=[]),this.hook[t].push({open:e,close:n}),document.getElementById(t).hasAttribute("data-popup-open")&&e&&e()},z:function(){var t=parseFloat(getComputedStyle(document.body).getPropertyValue("zoom"));return t||1},updateAlign:function(t){if(this.isIOS&&"none"==getComputedStyle(document.body.parentNode).getPropertyValue("scroll-snap-type")){var e=this.z(),n=document.body.style,o=n.cssText,i=o.indexOf("margin-top"),s=o.indexOf("position");if(i>=0&&s>=0&&(s=o.indexOf(";",s+8))>=0){var a=-parseInt(n.marginTop)*e;o=o.substring(0,i)+o.substring(s+1),n.cssText=o,window.scrollTo(0,a)}t||(o+="margin-top:-"+(window.scrollY/e).toFixed(3)+"px;width:calc(100% - var(--sw,0px));position:fixed;",n.cssText+=o)}},init:function(){var t=function(){var t=pop.z(),e=.01*window.innerHeight/t;if(pop.vh!==e){var n=document.body;pop.vh=e,n.style.setProperty("--vh",e+"px"),pop.hasClass(n,"modpop")&&pop.updateAlign()}};if("requestAnimationFrame"in window){var e=function(){t(),requestAnimationFrame(e)};requestAnimationFrame(e)}else this.addEvent(window,"resize",t),t();this.addEvent(window,"mousemove",this.mouseMove.bind(this)),this.addEvent(window,"touchmove",this.touchMove.bind(this))}};pop.init();
